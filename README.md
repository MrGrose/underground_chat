# Подключаемся к подпольномоу чату

## Описание

Программа подключается к анонимному чату для обмена кодами, где считывает сообщения и сохраняет их в файл с отметкой времени.


## Функционал
1. Записывает сообщение из анонимного чата в файл.
2. Отправляет сообщение в анонимный чат.
3. Авторизация
4. Регистрация, сохраняет ник и токен в файл - `user_auth.txt`.
5. Все события и ошибки логируются в файлы `chat.log` для последующего анализа.


## Архитектура
- `reader` - Читает из чата сообщение и запись их в файл.
- `sender` - Отправляет сообщение в чат, проводит регистрацию пользователя - если не зарегистритрован, авторизовывает.


## Опции командной строки

| Опция          | Описание                                    | Значение по умолчанию      |
|----------------|---------------------------------------------|----------------------------|
| `--host`       | Хост сервера                               | `minechat.dvmn.org`       |
| `--port`       | Порт сервера                               | 5000 (для чтения), 5050 (для записи) |
| `--history`    | Путь к папке для хранения истории переписки | `minechat`                 |
| `--nickname`   | Ник пользователя                           | Подгружается из `.env` (переменная `USER_NAME`), если не указан |
| `--token`      | Токен пользователя                         | Подгружается из `.env` (переменная `USER_TOKEN`), если не указан |
| `-m`           | Сообщение для отправки                      | Обязательный параметр для write_chat |

---

## Начало работы

1. Клонируйте репозиторий:
```bash
git clone <URL>
```

2. Установите зависимости:
```bash
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

3. Необходимо создать .env файл:
```bash
USER_NAME=ВашНик
USER_TOKEN=ВашТокен # если есть
HOST=minechat.dvmn.org # по умолчанию
READ_PORT=5000 # по умолчанию
SEND_PORT=5050 # по умолчанию
HISTORY=minechat # папка для истории переписки
```
Остальные параметры установлены под подключение к чату по умолчанию.


6. Запуск для записи чата: `python reader.py --host minechat.dvmn.org --port 5000 --history minechat`


7. Запуск для отправки в чат/регистрации/авторизации.

    - запуск с обязательным параметром `-m`: `python sender.py -m "Текс сообщения"`

    - запуск с параметром `-m --nickname`: `python sender.py -m "Текс сообщения" --nickname <Ваш ник>`

    - запуск с параметром `-m --token`: `python sender.py -m "Текс сообщения" --token <Ваш токен>`
